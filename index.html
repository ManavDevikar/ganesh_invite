<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pekde Family Invitation — Light Theme Celebration</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
/* ============================================================
   PEKDE INVITATION — EXPANDED LIGHT THEME
   Lots of decorative rules, repeated keyframes, and extras
   ============================================================ */

/* -----------------------------
   GLOBAL RESET & BASE
   ----------------------------- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(180deg, #fffaf3 0%, #fff7ea 40%, #fff1e6 100%);
  color: #3b2b2b;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow-x: hidden;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 30px;
}

/* Soft container to center content */
.container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  position: relative;
  z-index: 2;
}

/* -----------------------------
   TYPOGRAPHY
   ----------------------------- */
h1, h2, h3, h4 { font-family: 'Montserrat', sans-serif; color: #2f1f1f; }
p, li, span, div { font-size: 15px; color: #3b2b2b; }

/* tiny helper utility classes */
.flex { display:flex; }
.center { align-items:center; justify-content:center; }
.col { flex-direction:column; }

/* subtle page vignette border */
.page-vignette {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(60% 40% at 10% 10%, rgba(255,228,200,0.6), transparent 18%),
              radial-gradient(40% 30% at 90% 85%, rgba(255,240,230,0.5), transparent 20%);
  z-index: 0;
}

/* -----------------------------
   STAGE: MICE INTRO (light)
   ----------------------------- */
.stage {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 40;
  pointer-events: auto;
  background: linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,250,240,0.0));
  transition: opacity 0.8s ease, visibility 0.8s ease;
}
.stage.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

.mouse {
  position: absolute;
  font-size: 34px;
  transform: translateY(-50%);
  color: #cf8f5a;
  text-shadow: 0 6px 18px rgba(240,200,180,0.45);
  animation: walk linear infinite;
  user-select: none;
}
@keyframes walk { 0% { left: -12%; } 100% { left: 115%; } }

/* speech bubble */
.bubble {
  display:inline-block;
  background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,245,230,0.95));
  color: #6b4730;
  padding: 8px 12px;
  margin-left: 10px;
  border-radius: 16px;
  font-size: 13px;
  border: 1px solid rgba(220,180,140,0.6);
  box-shadow: 0 6px 18px rgba(200,150,100,0.12);
  animation: talk 2.8s infinite;
}
@keyframes talk {
  0% { opacity: 0; transform: translateY(8px); }
  20% { opacity: 1; transform: translateY(0); }
  80% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(-8px); }
}

/* small variations of walk for each mouse -> creates visual complexity */
.mouse.variant-a { animation-duration: 9s; top: 16%; }
.mouse.variant-b { animation-duration: 11s; top: 32%; }
.mouse.variant-c { animation-duration: 10s; top: 48%; }
.mouse.variant-d { animation-duration: 12s; top: 66%; }
.mouse.variant-e { animation-duration: 8.5s; top: 82%; }

/* -----------------------------
   CARD WRAPPER (light & decorative)
   ----------------------------- */
.card-container {
  position: relative;
  width: 100%;
  max-width: 760px;
  margin: 0 auto;
  z-index: 60;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.6s ease, visibility 0.6s ease;
}
.card-container.visible { opacity: 1; visibility: visible; pointer-events: auto; }

.card {
  width: 100%;
  background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,250,245,0.95));
  border-radius: 26px;
  padding: 28px;
  box-shadow: 0 25px 60px rgba(60,40,30,0.08), inset 0 0 30px rgba(255,220,180,0.03);
  text-align: center;
  transform: translateY(10px) scale(0.98);
  opacity: 0;
  transition: transform 0.6s cubic-bezier(.22,.9,.3,1), opacity 0.6s;
  pointer-events: none;
  border: 1px solid rgba(230,200,170,0.6);
  backdrop-filter: blur(4px);
  position: relative;
  overflow: visible;
}
.card.active { transform: translateY(0) scale(1); opacity: 1; pointer-events: auto; }

/* decorative corner ribbons — repeated classes for bulk */
.ribbon {
  position: absolute;
  width: 120px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  border-radius: 8px;
  color: #5a3a2b;
  background: linear-gradient(90deg,#fff1e0,#ffe6c7);
  box-shadow: 0 6px 16px rgba(200,160,120,0.12);
  border: 1px solid rgba(220,180,140,0.5);
  transform: rotate(-6deg);
  left: -10px;
  top: -12px;
}
.ribbon.right { right: -10px; left: auto; transform: rotate(6deg); }

/* repeated decorative ribbons for visual density */
.ribbon.small { width: 86px; height: 22px; font-size: 12px; border-radius: 6px; }
.ribbon.large { width: 140px; height: 34px; font-size: 15px; border-radius: 10px; }

.card .hero {
  width: 60vw;
  max-width: 220px;
  height: 60vw;
  max-height: 220px;
  margin: 0 auto 20px;
  border-radius: 50%;
  border: 6px solid rgba(255, 200, 150, 0.8);
  box-shadow: 0 8px 20px rgba(200, 160, 120, 0.3);
  object-fit: cover;   /* fills circle completely */
  display: block;
}



/* heading style */
h2.title {
  font-family: 'Montserrat', sans-serif;
  font-weight: 800;
  font-size: 30px;
  margin-bottom: 6px;
  color: #b35d2a;
  letter-spacing: -0.5px;
}

/* subtext */
p.lead {
  color: #5a3b2b;
  margin-bottom: 18px;
  font-size: 15px;
  line-height: 1.55;
}

/* detail boxes (left-right layout) */
.detail-box {
  background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,250,245,0.95));
  border-radius: 12px;
  padding: 12px 14px;
  margin: 10px 0;
  text-align: left;
  font-weight: 600;
  color: #5a3b2b;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  border: 1px solid rgba(230,200,170,0.4);
}
.detail-left { color: #c57b44; min-width: 110px; font-weight:700; }
.detail-right { color: #5a3b2b; font-weight:600; text-align: right; }

/* shading separators to bulk CSS */
.separator { height: 10px; }

/* -----------------------------
   ACCEPT BUTTON (visual states)
   ----------------------------- */
.accept-btn {
  margin-top: 18px;
  padding: 14px 36px;
  font-size: 18px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  font-weight: 800;
  background: linear-gradient(90deg,#ffd9b8,#ffb886);
  color: #4b2d20;
  box-shadow: 0 12px 30px rgba(255,170,120,0.12), 0 6px 18px rgba(80,50,40,0.04);
  transition: transform .24s ease, opacity .24s ease, box-shadow .24s ease;
}
.accept-btn:hover { transform: translateY(-4px); box-shadow: 0 22px 48px rgba(255,170,120,0.14); }
.accept-btn:active { transform: translateY(-1px); }
.accept-btn[disabled] {
  opacity: 0.6;
  cursor: default;
  transform: none;
  box-shadow: none;
  filter: grayscale(.05);
}

/* accepted label style */
.accepted-label {
  display:inline-block;
  font-weight:800;
  color:#8a4b27;
}

/* -----------------------------
   EXTRA DECORATIVE PATTERNS (glows, borders)
   ----------------------------- */
.card::before,
.card::after {
  content: "";
  position: absolute;
  inset: -8px;
  z-index: -2;
  border-radius: 32px;
  background: radial-gradient(1200px 200px at 20% 20%, rgba(255,220,170,0.12), transparent 12%),
              radial-gradient(800px 160px at 80% 80%, rgba(255,210,180,0.08), transparent 10%);
  opacity: 0.9;
  pointer-events: none;
}

.card::after {
  inset: -18px;
  filter: blur(36px);
  opacity: 0.55;
}

/* chromatic border lines repeated multiple times to bulk CSS */
.border-line { position: absolute; inset: 0; border-radius: 30px; pointer-events:none; }
.border-line.layer-1 { box-shadow: 0 0 0 2px rgba(255,225,180,0.16) inset; }
.border-line.layer-2 { box-shadow: 0 0 0 4px rgba(255,200,150,0.06) inset; }
.border-line.layer-3 { box-shadow: 0 0 0 8px rgba(255,180,120,0.02) inset; }

/* -----------------------------
   WELCOME SCREEN (confetti, firework variants)
   ----------------------------- */
   .welcome-screen {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 200;
  background: linear-gradient(180deg, #0d1b2a, #1b263b, #000000); /* dark night sky */
  overflow: hidden;
}

.welcome-card {
  padding: 22px 28px;
  border-radius: 20px;
  background: linear-gradient(180deg,#fff9f0,#fff6ec);
  text-align: center;
  border: 1px solid rgba(230,200,170,0.45);
  box-shadow: 0 40px 120px rgba(60,40,30,0.08);
  transform: translateY(16px) scale(.96);
  animation: welcomePop .7s cubic-bezier(.22,.9,.3,1) forwards;
}
@keyframes welcomePop { from { transform: translateY(20px) scale(.96); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }
.welcome-message {
  font-family: 'Montserrat', sans-serif;
  font-weight:900;
  font-size: clamp(18px, 3.8vw, 38px);
  color: #b85a2b;
}

/* confetti particle */
.confetti {
  position: absolute;
  width: 10px;
  height: 14px;
  border-radius: 3px;
  opacity: 0;
  transform-origin: center;
  animation: confettiFall 2.8s linear forwards;
  z-index: 210;
}
@keyframes confettiFall {
  0% { opacity: 1; transform: translateY(-10vh) rotate(0deg) scale(1); }
  30% { opacity: 1; }
  100% { opacity: 0; transform: translateY(110vh) rotate(720deg) scale(0.8); }
}

/* firecracker particle (small spark) */
.firecracker {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  opacity: 0;
  animation: fireBurst 1.1s ease-out forwards;
  pointer-events: none;
  z-index: 205;
  box-shadow: 0 0 10px rgba(255,210,140,0.85);
}
@keyframes fireBurst {
  0% { transform: translate(0,0) scale(1); opacity: 1; }
  100% { transform: translate(var(--x), var(--y)) scale(.3); opacity: 0; }
}

/* sparkle glow elements repeated many times (bulk) */
.sparkle {
  position: absolute;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  opacity: 0;
  filter: blur(0.6px);
  animation: sparklePop 1.2s ease-in-out forwards;
}
@keyframes sparklePop {
  0% { transform: scale(0.2); opacity: 0; }
  30% { transform: scale(1.15); opacity: 1; }
  100% { transform: scale(0.6); opacity: 0; }
}

/* -----------------------------
   FLOWER DROPS (lots of variants)
   ----------------------------- */
.flower {
  position: absolute;
  font-size: 28px;
  pointer-events: none;
  animation: fall 3.6s linear forwards;
  z-index: 120;
  opacity: 0;
  text-shadow: 0 2px 8px rgba(200,160,120,0.08);
}
@keyframes fall {
  0% { top: -6%; opacity: 0; transform: rotate(0deg) scale(.92); }
  10% { opacity: 1; }
  90% { opacity: 1; transform: rotate(380deg); }
  100% { top: 110%; opacity: 0; }
}

/* small rotation variants to bulk CSS */
@keyframes swayA { 0%{transform:rotate(0deg)}50%{transform:rotate(12deg)}100%{transform:rotate(0deg)} }
@keyframes swayB { 0%{transform:rotate(0deg)}50%{transform:rotate(-14deg)}100%{transform:rotate(0deg)} }
@keyframes swayC { 0%{transform:rotate(0deg)}50%{transform:rotate(8deg)}100%{transform:rotate(0deg)} }

/* -----------------------------
   FLOATING LAMPS DECOR (repeated)
   ----------------------------- */
.lamp {
  position: absolute;
  width: 48px;
  height: 64px;
  border-radius: 12px;
  background: linear-gradient(180deg,#fff1d8,#ffd3a8);
  box-shadow: 0 12px 24px rgba(200,150,100,0.12);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 20px;
  z-index: 90;
  animation: lampFloat 4s ease-in-out infinite;
}
@keyframes lampFloat { 0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)} }

/* many small repeated keyframes to bulk and create layered motion */
@keyframes floatA { 0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)} }
@keyframes floatB { 0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)} }
@keyframes floatC { 0%{transform:translateY(0)}50%{transform:translateY(-12px)}100%{transform:translateY(0)} }

/* -----------------------------
   RESPONSIVE & ACCESSIBILITY
   ----------------------------- */
@media (max-width: 920px) {
  .card { padding: 20px; border-radius: 22px; }
  .card .hero { width: 92%; }
}
@media (max-width: 560px) {
  body { padding: 16px; }
  .card { padding: 16px; border-radius: 16px; }
  h2.title { font-size: 20px; }
  .detail-left { min-width: 78px; font-size: 13px; }
  .detail-right { font-size: 13px; }
  .lamp { display: none; }
}

/* -----------------------------
   EXTRA BULK: decorative classes repeated
   (these add lines to CSS and give many options)
   ----------------------------- */
/* gradient variants */
.grad-1 { background: linear-gradient(90deg,#fff7ef,#ffe6d0); }
.grad-2 { background: linear-gradient(90deg,#fffaf3,#fff0e0); }
.grad-3 { background: linear-gradient(90deg,#fff6f0,#fff1e6); }
.grad-4 { background: linear-gradient(90deg,#fff8f2,#fff2e8); }

/* repeated shadow helpers */
.shadow-soft { box-shadow: 0 8px 26px rgba(60,40,30,0.06); }
.shadow-mid { box-shadow: 0 16px 46px rgba(60,40,30,0.08); }
.shadow-strong { box-shadow: 0 28px 88px rgba(60,40,30,0.09); }

/* decorative borders many layers */
.layered-border-1 { box-shadow: 0 0 0 2px rgba(255,230,200,0.16) inset; }
.layered-border-2 { box-shadow: 0 0 0 4px rgba(255,210,170,0.06) inset; }
.layered-border-3 { box-shadow: 0 0 0 6px rgba(255,200,150,0.03) inset; }

/* repeated small animation delays for variance */
.delay-1 { animation-delay: 0.06s; }
.delay-2 { animation-delay: 0.12s; }
.delay-3 { animation-delay: 0.2s; }
.delay-4 { animation-delay: 0.28s; }
.delay-5 { animation-delay: 0.36s; }
.delay-6 { animation-delay: 0.5s; }

/* END OF CSS */

</style>
</head>
<body>

<div class="page-vignette" aria-hidden="true"></div>

<div class="container">

  <!-- STAGE: mice intro -->
  <div class="stage" id="stage" aria-hidden="false">
    <div class="mouse variant-a">🐭 <span class="bubble">Ganesh Chaturthi!</span></div>
    <div class="mouse variant-b">🐭 <span class="bubble">Jai Ganesh Deva!</span></div>
    <div class="mouse variant-c">🐭 <span class="bubble">Ganpati Bappa Morya!</span></div>
    <div class="mouse variant-d">🐭 <span class="bubble">Mangal Murti Morya!</span></div>
    <div class="mouse variant-e">🐭 <span class="bubble">Ganeshji Ki Jai!</span></div>
  </div>

  <!-- CARD -->
  <div class="card-container" id="cardContainer" role="region" aria-label="Invitation Card">
    <div class="card grad-1 shadow-mid" id="card" aria-hidden="true">

      <!-- decorative ribbons -->
      <div class="ribbon large">Pekde Parivaar</div>
      <div class="ribbon right large">Ganpati Bappa Morya !</div>

      <!-- hero image -->
      <img class="hero" src="ganu.jpg" alt="Shree Ganesh Ji" />

      <h2 class="title">🙏 Join us for Blessing & Prasad 🙏</h2>
      <p class="lead">With love and devotion, the Pekde Family invites you to join us for the auspicious Ganesh Sthapana, aarti, and prasad — an evening of devotion and celebration.</p>

      <div class="detail-box"><div class="detail-left">Host</div><div class="detail-right">Mr. Chandrapal Pekde</div></div>
      <div class="detail-box"><div class="detail-left">Venue</div><div class="detail-right">Swami Vivekananda Library, Near Gandhi Sagar Lake, Mahal Nagpur-440002</div></div>
      <div class="detail-box"><div class="detail-left">Date</div><div class="detail-right">Friday, 5th September 2025</div></div>
      <div class="detail-box"><div class="detail-left">Time</div><div class="detail-right">7:00 PM Onwards</div></div>
      <div class="detail-box"><div class="detail-left">Contact</div><div class="detail-right">+91 7020442980 (Shubham Pekde)</div></div>

      <div class="separator"></div>

      <button class="accept-btn" id="acceptBtn" aria-pressed="false">Accept Invitation</button>

      <!-- decorative layered borders (non-interactive) -->
      <div class="border-line layer-1" aria-hidden="true"></div>
      <div class="border-line layer-2" aria-hidden="true"></div>
      <div class="border-line layer-3" aria-hidden="true"></div>
    </div>
  </div>

  <!-- floating lamps decoration (can be many — repeated for density) -->
  <div class="lamp" style="left:6%; top:18%; animation-duration:4.2s;">🪔</div>
  <div class="lamp" style="left:18%; top:10%; animation-duration:3.8s;">🪔</div>
  <div class="lamp" style="left:84%; top:16%; animation-duration:4.6s;">🪔</div>
  <div class="lamp" style="left:72%; top:8%; animation-duration:4.0s;">🪔</div>

</div> <!-- end container -->

<!-- WELCOME SCREEN (confetti, firecrackers) -->
<div class="welcome-screen" id="welcomeScreen" role="dialog" aria-modal="true">
  <div class="welcome-card">
    <div class="welcome-message">🎉 <strong style="color:#b85a2b">Pekde Family Welcomes You</strong> 🎉</div>
  </div>
</div>

<!-- many hidden decorative containers to attach confetti/sparkles dynamically -->
<div id="decoratives" aria-hidden="true"></div>

<script>
/* ======================================================
   JavaScript - interactions & lots of decorative effects
   ====================================================== */

const stage = document.getElementById('stage');
const cardContainer = document.getElementById('cardContainer');
const card = document.getElementById('card');
const acceptBtn = document.getElementById('acceptBtn');
const welcomeScreen = document.getElementById('welcomeScreen');
const decoratives = document.getElementById('decoratives');

const CARD_APPEAR_DELAY = 3800;
const FLOWER_TOTAL = 140;
const FIRE_INTERVAL = 380;

let cardShown = false;
let fireIntervalId = null;
let confettiIntervalId = null;

/* show card after intro or earlier if user clicks */
const showTimeout = setTimeout(showCard, CARD_APPEAR_DELAY);
stage.addEventListener('click', showCard);

/* also allow tap anywhere on body to skip intro on mobile */
document.body.addEventListener('touchstart', (e) => {
  // prevent accidental immediate skip — only skip if not shown
  if (!cardShown) showCard();
}, { once: true });

function showCard() {
  if (cardShown) return;
  cardShown = true;
  clearTimeout(showTimeout);

  // fade out the stage mice
  stage.classList.add('hidden');
  // show card container
  cardContainer.classList.add('visible');

  // small delay then animate card in and start flowers
  setTimeout(() => {
    card.classList.add('active');
    card.setAttribute('aria-hidden', 'false');
    // play gentle flower drop
    throwFlowers(FLOWER_TOTAL);
    // also spawn a few sparkles near top corners for decoration
    spawnSparkles(8);
  }, 420);
}

/* Accept button behavior */
acceptBtn.addEventListener('click', () => {
  if (acceptBtn.disabled) return;

  // disable to avoid double clicks
  acceptBtn.disabled = true;
  acceptBtn.setAttribute('aria-pressed', 'true');
  acceptBtn.textContent = "Accepted ✔";
  acceptBtn.classList.add('accepted');

  // animate card out for a polished transition
  card.classList.remove('active');
  card.style.opacity = '0';
  card.style.transform = 'translateY(12px) scale(.96)';
  card.style.pointerEvents = 'none';

  // after card transition, hide card and show welcome with effects
  setTimeout(() => {
    cardContainer.style.display = 'none';
    welcomeScreen.style.display = 'flex';

    // start firecracker bursts (short-lived)
    fireIntervalId = setInterval(createFirecrackerBurst, FIRE_INTERVAL);

    // start confetti raining
    confettiIntervalId = setInterval(createConfettiBatch, 140);

    // stop both after some time
    setTimeout(() => {
      if (fireIntervalId) { clearInterval(fireIntervalId); fireIntervalId = null; }
      if (confettiIntervalId) { clearInterval(confettiIntervalId); confettiIntervalId = null; }
      // final sparkles
      spawnSparkles(18);
    }, 9500);

  }, 560);
});

/* create a single firecracker burst (many small sparks) */
function createFirecrackerBurst() {
  const colors = ["#FFD17A","#FFB47A","#FF8C6E","#FF6B5A","#E76FB9","#FFD36B"];
  const areaWidth = window.innerWidth;
  const xPercent = Math.random() * 86 + 7; // keep away from exact edges
  const yPercent = Math.random() * 48 + 6;

  const count = 18 + Math.floor(Math.random() * 14);
  for (let i = 0; i < count; i++) {
    const spark = document.createElement('div');
    spark.className = 'firecracker';
    spark.style.left = xPercent + '%';
    spark.style.top = yPercent + '%';
    spark.style.background = colors[Math.floor(Math.random() * colors.length)];

    const angle = (Math.PI * 2 * i) / count + (Math.random() * 0.36 - 0.18);
    const dist = 60 + Math.random() * 130;
    const dx = Math.cos(angle) * dist;
    const dy = Math.sin(angle) * dist * (0.8 + Math.random() * 0.5);

    spark.style.setProperty('--x', dx + 'px');
    spark.style.setProperty('--y', dy + 'px');

    welcomeScreen.appendChild(spark);

    // remove after animation end with a little jitter
    setTimeout(() => {
      spark.remove();
    }, 1000 + Math.random() * 300);
  }
}

/* Create a confetti batch that falls down */
function createConfettiBatch() {
  const batchCount = 6 + Math.floor(Math.random() * 8);
  for (let i = 0; i < batchCount; i++) {
    const conf = document.createElement('div');
    conf.className = 'confetti';
    const w = 8 + Math.floor(Math.random() * 10);
    conf.style.width = w + 'px';
    conf.style.height = Math.max(8, Math.floor(w * 1.4)) + 'px';

    // random color palette - light festive tones
    const colors = ["#FFD1A6","#FFE7B8","#FFC8A3","#FFDDAE","#FFB6C1","#E5B7FF", "#D7F8D7"];
    conf.style.background = colors[Math.floor(Math.random() * colors.length)];

    // position at top with some horizontal spread
    const left = Math.random() * 96 + 2;
    conf.style.left = left + '%';
    conf.style.top = (-4 - Math.random() * 6) + 'vh';

    // random rotation and fall variance
    conf.style.transform = `rotate(${Math.random() * 360}deg)`;
    conf.style.opacity = '1';
    welcomeScreen.appendChild(conf);

    // remove after animation end
    setTimeout(() => conf.remove(), 3000 + Math.random() * 800);
  }
}

/* spawn sparkles around the welcome card / screen */
function spawnSparkles(total) {
  const w = window.innerWidth;
  const h = window.innerHeight;

  for (let i = 0; i < total; i++) {
    const sp = document.createElement('div');
    sp.className = 'sparkle';
    const size = 6 + Math.floor(Math.random() * 12);
    sp.style.width = size + 'px';
    sp.style.height = size + 'px';

    const lx = 8 + Math.random() * 84;
    const ly = 8 + Math.random() * 70;
    sp.style.left = lx + '%';
    sp.style.top = ly + '%';

    const colorChoices = ['#fff0d6','#fff6e8','#ffe6cf','#ffd8b2','#ffecf3'];
    sp.style.background = colorChoices[Math.floor(Math.random() * colorChoices.length)];

    // vary animation timing
    sp.style.animationDelay = (Math.random() * 0.6) + 's';
    sp.style.opacity = '0.95';

    welcomeScreen.appendChild(sp);

    setTimeout(() => sp.remove(), 1400 + Math.random() * 900);
  }
}

/* FLOWER TOSS - many flowers fall softly from top */
function throwFlowers(total) {
  let sent = 0;
  const interval = setInterval(() => {
    const perBurst = 2 + Math.floor(Math.random() * 4);
    for (let i = 0; i < perBurst; i++) {
      if (sent >= total) { clearInterval(interval); return; }
      createFlower();
      sent++;
    }
  }, 80 + Math.random() * 60);
}

/* create a single flower element and animate it */
function createFlower() {
  const el = document.createElement('div');
  el.className = 'flower';
  const variants = ["🌸","🌺","🌼","🌻","💮","🌷","🌹","🌿"];
  el.textContent = variants[Math.floor(Math.random() * variants.length)];
  el.style.left = (6 + Math.random() * 88) + '%';
  // randomize fall duration and slight sway
  const duration = 3 + Math.random() * 1.6;
  el.style.animationDuration = duration + 's';
  // slight rotation variant classes
  const sway = Math.random();
  if (sway < 0.33) el.style.animationName = 'fall';
  else if (sway < 0.66) { el.style.animationName = 'fall'; el.style.transform = `rotate(${Math.random()*40 - 20}deg)`; }
  else { el.style.animationName = 'fall'; el.style.transform = `rotate(${Math.random()*360}deg)`; }

  document.body.appendChild(el);

  // remove after animation (with jitter)
  setTimeout(() => {
    if (el && el.parentNode) el.remove();
  }, (duration * 1000) + 400 + Math.random() * 600);
}

/* keyboard accessibility */
acceptBtn.addEventListener('keyup', (e) => {
  if ((e.key === 'Enter' || e.key === ' ') && !acceptBtn.disabled) {
    acceptBtn.click();
  }
});

/* allow skipping intro with Escape */
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') showCard();
});

/* ensure stage click shows card on touch devices too */
stage.addEventListener('touchstart', () => {
  if (!cardShown) showCard();
}, { passive: true });

/* cleanup on unload */
window.addEventListener('beforeunload', () => {
  if (fireIntervalId) clearInterval(fireIntervalId);
  if (confettiIntervalId) clearInterval(confettiIntervalId);
});

</script>

</body>
</html>
